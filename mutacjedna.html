<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Algorytm genetyczny: 100 kropek w labiryncie</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div id="ui">
    <h2>Genetyczny labirynt</h2>

    <div class="stat">
      <span class="pill">Populacja: <b id="pop">100</b></span>
      <span class="pill">Generacja: <b id="gen">0</b></span>
    </div>
    <div class="stat">
      <span class="pill">Najlepszy fitness: <b id="best">0</b></span>
      <span class="pill">Średni fitness: <b id="avg">0</b></span>
    </div>
    <div class="stat"><span class="pill">Różnorodność genetyczna: <b id="diversity">0%</b></span></div>

    <label>Rozmiar populacji</label>
    <input id="popSize" type="range" min="10" max="500" value="100">
    <div>Wartość: <b id="popSizeVal">100</b></div>
    <div style="font-size:12px; color:#999; margin-top:2px;">Większa populacja = większa różnorodność, ale wolniejsze obliczenia</div>

    <label>Długość DNA (kroki)</label>
    <input id="dnaLen" type="range" min="50" max="800" value="300">
    <div>Wartość: <b id="dnaLenVal">300</b></div>
    <div style="font-size:12px; color:#999; margin-top:2px;">Liczba ruchów zapisanych w DNA każdego agenta</div>

    <label>Współczynnik krzyżowania (%)</label>
    <input id="crossoverRate" type="range" min="0" max="100" value="100">
    <div>Wartość: <b id="crossoverRateVal">100%</b></div>
    <div style="font-size:12px; color:#999; margin-top:2px;">Prawdopodobieństwo krzyżowania DNA rodziców (rekombinacja genetyczna)</div>

    <label>Mutacja (%)</label>
    <input id="mutRate" type="range" min="0" max="20" value="5">
    <div>Wartość: <b id="mutRateVal">5%</b></div>
    <div style="font-size:12px; color:#999; margin-top:2px;">Prawdopodobieństwo mutacji pojedynczego genu</div>

    <label>Elitaryzm (ile najlepszych)</label>
    <input id="elite" type="range" min="0" max="50" value="5">
    <div>Wartość: <b id="eliteVal">5</b></div>
    <div style="font-size:12px; color:#999; margin-top:2px;">Liczba najlepszych osobników przechodzących bez zmian</div>

    <label>Metoda selekcji</label>
    <select id="selMethod">
      <option value="roulette">Ruletka (roulette)</option>
      <option value="tournament">Turniej (tournament)</option>
      <option value="rank">Ranga (rank)</option>
    </select>
    <div style="font-size:13px; color:#bbb; margin-top:6px;">
      <b>Wyjaśnienie metod:</b>
      <ul style="margin:6px 0 0 18px; color:#aaa;">
        <li><b>Ruletka</b> – prawdopodobieństwo proporcjonalne do fitnessu (selekcja proporcjonalna).</li>
        <li><b>Turniej</b> – losujemy kilku osobników, wybieramy najlepszego (mniej wrażliwe na skrajne wartości).</li>
        <li><b>Ranga</b> – sortujemy po fitness i wybieramy według rangi (redukuje wpływ wartości odstających).</li>
      </ul>
    </div>

    <label>Rozmiar turnieju</label>
    <input id="tournamentSize" type="range" min="2" max="20" value="5">
    <div>Wartość: <b id="tournamentSizeVal">5</b></div>
    <div style="font-size:12px; color:#999; margin-top:2px;">Liczba uczestników turnieju (tylko dla selekcji turniejowej)</div>

    <label style="margin-top:12px;">
      <input type="checkbox" id="showTrails" checked> Pokaż trajektorie (ścieżki)
    </label>

    <div style="margin-top:16px;">
      <button id="restart">Restart</button>
      <button id="pause">Pauza</button>
    </div>
  </div>

  <canvas id="cv" width="720" height="520"></canvas>

  <div id="desc">
    <h3>Podstawy algorytmów genetycznych</h3>
    <p>
      Twórcą algorytmów genetycznych był <b>John Henry Holland</b> (1929–2015), profesor Uniwersytetu Michigan. 
      Zainspirował się procesami biologicznej ewolucji – selekcją naturalną, dziedziczeniem cech i mutacjami – 
      oraz matematyką: teorią systemów złożonych, kombinatoryką i teorią informacji. 
      Chciał pokazać, że komputer może „uczyć się" poprzez symulację ewolucji, 
      bez konieczności pełnej wiedzy o strukturze problemu.
    </p>
    <p>
      W praktyce oznacza to, że rozwiązania problemu traktujemy jak osobniki z DNA. 
      DNA to zapis parametrów lub instrukcji. Osobniki podlegają ocenie – mierzymy ich <b>fitness</b>, 
      czyli jak dobrze radzą sobie z zadaniem - matematyczna miara „przystosowania" rozwiązania do zadania. 
      Najlepsi mają większą szansę na reprodukcję. Tworzymy nowe pokolenia poprzez <b>krzyżowanie</b> DNA 
      (rekombinacja genetyczna) i <b>mutacje</b>, co pozwala populacji eksplorować przestrzeń rozwiązań.
    </p>
    <p>
      Holland pokazał, że nawet proste reguły – ocena, selekcja, krzyżowanie, mutacja – 
      mogą prowadzić do złożonych i skutecznych rozwiązań. To przykład, jak matematyczne 
      modele inspirowane naturą mogą rozwiązywać problemy, których nie umiemy ugryźć 
      klasycznymi metodami analitycznymi.
    </p>
    <h3>Kluczowe parametry genetyczne</h3>
    <ul>
      <li><b>Rozmiar populacji</b> – większa populacja zwiększa różnorodność genetyczną i szansę na znalezienie 
        dobrego rozwiązania, ale spowalnia obliczenia. W biologii: większa populacja = większa pula genowa.</li>
      <li><b>Współczynnik krzyżowania</b> – prawdopodobieństwo rekombinacji genetycznej. W biologii odpowiada 
        procesowi crossing-over podczas mejozy. Wartość 100% oznacza, że zawsze krzyżujemy DNA rodziców.</li>
      <li><b>Współczynnik mutacji</b> – prawdopodobieństwo mutacji pojedynczego genu. Zbyt wysoka prowadzi 
        do chaotycznych zmian, zbyt niska ogranicza eksplorację przestrzeni rozwiązań.</li>
      <li><b>Elitaryzm</b> – zachowanie najlepszych osobników bez zmian. Zapewnia stabilność i chroni 
        przed utratą dobrych rozwiązań przez przypadkową mutację.</li>
    </ul>

    <h3>Jak to działa?</h3>
    <p>
      Mamy populację kropek. Każda kropka ma DNA — listę małych wektorów ruchu.
      Symulujemy je jednocześnie; jeśli kropka uderzy w ścianę, umiera. Po wykonaniu wszystkich kroków
      oceniamy, które były najbliżej celu (fitness). Najlepsze kopiujemy, mieszamy i losowo zmieniamy.
      To proste odzwierciedlenie selekcji naturalnej: różnorodność + selekcja = lepsze rozwiązania.
    </p>
    <h3>Funkcja fitness</h3>
    <p>
      Fitness jest obliczany na podstawie odległości od celu, statusu agenta (żywy/martwy/osiągnął cel) 
      oraz efektywności ścieżki. Im bliżej celu, tym wyższy fitness. Agent otrzymuje duży bonus za 
      osiągnięcie celu (selekcja pozytywna) i karę za śmierć (selekcja negatywna). 
      Funkcja uwzględnia również długość przebytej ścieżki, promując bardziej efektywne rozwiązania.
    </p>
    <h3>Różnorodność genetyczna</h3>
    <p>
      Różnorodność genetyczna mierzy, jak różne są DNA osobników w populacji. Wysoka różnorodność 
      oznacza szeroką eksplorację przestrzeni rozwiązań, niska może prowadzić do przedwczesnej zbieżności 
      (premature convergence) – sytuacji, gdy populacja utknęła w lokalnym optimum. 
      Monitorowanie różnorodności jest kluczowe dla zrozumienia dynamiki ewolucji.
    </p>
  </div>

  <script src="index.js"></script>
</body>
