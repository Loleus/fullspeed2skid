<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Full Speed 2 Skid - online racing project. Author: LxO (@loleus), email: loleus@gmail.com">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#222222">
  <meta name="author" content="LxO">
  <meta name="email" content="loleus@gmail.com">
  <!-- Open Graph / Facebook / Instagram -->
  <meta property="og:title" content="Full Speed 2 Skid" />
  <meta property="og:description" content="Online racing project. Author: LxO (@loleus), email: loleus@gmail.com" />
  <meta property="og:image" content="https://loleus.github.io/fullspeed2skid/assets/images/fullspeed2skid.jpg" />
  <meta property="og:url" content="https://loleus.github.io/fullspeed2skid/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Full Speed 2 Skid" />
  <title>Full Speed 2 Skid</title>
  <script src="src/phaser.js"></script>
  <link rel="stylesheet" href="assets/style/style.css">
  <link rel="preload" href="assets/fonts/skid.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="assets/fonts/punk_kid.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="assets/fonts/Stormfaze.otf" as="font" type="font/otf" crossorigin>
  <style>

    @font-face {
      font-family: 'skid';
      src: url('assets/fonts/skid.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    @font-face {
      font-family: 'punk_kid';
      src: url('assets/fonts/punk_kid.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    @font-face {
      font-family: 'Stormfaze';
      src: url('assets/fonts/Stormfaze.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
    }
    #font-preload {
      position: absolute;
      left: -9999px;
      visibility: hidden;
      font-family: 'fullspeed2', 'skid', 'punk kid', 'Stormfaze', Arial, sans-serif;
    }
  </style>
</head>
<body>
  <span id="font-preload">Font preload</span>
  <script>
    async function waitForFonts() {
      if (document.fonts) {
        await document.fonts.load('24px "punk_kid"');
        await document.fonts.load('40px skid');
        await document.fonts.load('50px Stormfaze');
        await document.fonts.ready;
      }
    }

    window.addEventListener('DOMContentLoaded', async () => {
      await waitForFonts();
      // Phaser domyślnie tworzy <canvas> bez id, więc nadajemy mu id po utworzeniu gry
      const observer = new MutationObserver(() => {
        document.querySelectorAll('canvas').forEach(c => {
          if (!c.id || c.id !== 'phaser-canvas') {
            c.id = 'phaser-canvas';
          }
        });
      });
      observer.observe(document.body, { childList: true, subtree: true });
      // Start gry po observerze
      const script = document.createElement('script');
      script.type = 'module';
      script.src = 'src/main.js';
      document.body.appendChild(script);
    });
  </script>
  
</body>
</html>
